<%# Update attachments list %>
<%= turbo_stream.update "attachments" do %>
  <% attachments = @folder.attachments.includes(file_attachment: :blob).order(created_at: :desc) %>
  <% if attachments.any? %>
    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3">
      <% attachments.each do |attachment| %>
        <%= render "attachments/attachment", attachment: attachment %>
      <% end %>
    </div>
  <% else %>
    <div class="text-center py-12">
      <svg class="w-16 h-16 mx-auto text-dark-text-muted opacity-50 mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
      </svg>
      <p class="text-dark-text-muted"><%= t("folders.show.empty") %></p>
    </div>
  <% end %>
<% end %>

<%# Show success toast %>
<%= turbo_stream.prepend "main-content" do %>
  <div class="toast toast-success" data-controller="toast" data-toast-delay-value="3000">
    <% if @uploaded_count > 1 %>
      <%= t("attachments.messages.uploaded_multiple", count: @uploaded_count) %>
    <% else %>
      <%= t("attachments.messages.uploaded") %>
    <% end %>
  </div>
<% end %>
